try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="74e3317c-a443-4fc3-a3b1-60b63a3a80f5",e._sentryDebugIdIdentifier="sentry-dbid-74e3317c-a443-4fc3-a3b1-60b63a3a80f5")}()}catch(e){}try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="1766251861234d6ffef4e14"}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1348],{8933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},10586:(e,t)=>{function r(e){return"object"==typeof e&&!n(e)}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=r,t.isArray=n,t.isNonNullObject=function(e){return r(e)&&null!==e},t.isEmail=function(e){return"string"==typeof e&&/^[^@]+@[^@]+$/.test(e)},t.isURL=function(e){if("string"!=typeof e||/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e))return!1;try{let t=new URL(e),r=t.protocol,n=t.hostname,i=t.pathname;if("http:"!==r&&"https:"!==r||!n||!/^[a-zA-Z0-9]+[\w-]*([.]?[a-zA-Z0-9]+[\w-]*)*$/.test(n)||i&&"/"!==i&&!/^(\/[\w\-.~!$'()*+,;=:@%]+)*\/?$/.test(i))return!1}catch{return!1}return!0}},12577:(e,t)=>{async function r(e){let t=await e.json();if(!t)return"Missing error payload";let r="string"==typeof t.error?t.error:t.error?.message??"Missing error payload";return t.error_description&&(r+=" ("+t.error_description+")"),r}async function n(e,t){return(await o(e,t)).json()}async function i(e,t){return(await o(e,t)).text()}async function o(e,t){let n=await fetch(e,t);if(!n.ok)throw Error(await r(n));return n}function s(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;let n=e;n[r]=s(n[r],n[r])}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.formatString=function(e,t){let r=e;return Object.keys(t||{}).forEach(e=>{r=r.replace(RegExp("{"+e+"}","g"),t[e])}),r},t.fetchJson=n,t.fetchText=i,t.fetchAny=o,t.mapJwtPayloadToDecodedIdToken=function(e){return e.uid=e.sub,e},t.addReadonlyGetter=function(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,enumerable:!0})},t.deepCopy=function(e){return s(void 0,e)},t.deepExtend=s,t.toUint8Array=function(e){return a.encode(e)};let a=new TextEncoder},16223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ALGORITHM_RS256=void 0,t.getPublicCryptoKey=a,t.verify=l;let n=r(21293),i=r(47821);t.ALGORITHM_RS256="RS256";let o=new Map;async function s(e){return e.startsWith("-----BEGIN CERTIFICATE-----")?(0,n.importX509)(e,t.ALGORITHM_RS256):(0,n.importSPKI)(e,t.ALGORITHM_RS256)}async function a(e){let t=o.get(e);if(t)return t;let r=await s(e);return o.set(e,r),r}async function l(e,t,r){let o=r.currentDate??new Date,s=o.getTime()/1e3,a=(0,n.decodeJwt)(e);if(!(0,i.useEmulator)()){let{payload:r}=await (0,n.jwtVerify)(e,await t(),{currentDate:o});return r}if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new n.errors.JWTInvalid("invalid nbf value");if(a.nbf>s)throw new n.errors.JWTExpired("jwt not active: "+new Date(1e3*a.nbf).toISOString(),a)}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new n.errors.JWTInvalid("invalid exp value");if(s>=a.exp)throw new n.errors.JWTExpired("token expired: "+new Date(1e3*a.exp).toISOString(),a)}return a}},18511:(e,t,r)=>{r.d(t,{UO:()=>m,dK:()=>d,wE:()=>h});var n=r(85001),i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=n.createContext({}),h=n.forwardRef((e,t)=>{var r,i,h,m,y,{value:g,onChange:v,maxLength:E,textAlign:A="left",pattern:w,placeholder:b,inputMode:T="numeric",onComplete:I,pushPasswordManagerStrategy:_="increase-width",pasteTransformer:S,containerClassName:R,noScriptCSSFallback:C=p,render:O,children:k}=e,N=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))0>t.indexOf(n)&&u.call(e,n)&&(r[n]=e[n]);return r})(e,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[U,P]=n.useState("string"==typeof N.defaultValue?N.defaultValue:""),F=null!=g?g:U,L=function(e){let t=n.useRef();return n.useEffect(()=>{t.current=e}),t.current}(F),M=n.useCallback(e=>{null==v||v(e),P(e)},[v]),D=n.useMemo(()=>w?"string"==typeof w?new RegExp(w):w:null,[w]),j=n.useRef(null),x=n.useRef(null),G=n.useRef({value:F,onChange:M,isIOS:"undefined"!=typeof window&&(null==(i=null==(r=null==window?void 0:window.CSS)?void 0:r.supports)?void 0:i.call(r,"-webkit-touch-callout","none"))}),H=n.useRef({prev:[null==(h=j.current)?void 0:h.selectionStart,null==(m=j.current)?void 0:m.selectionEnd,null==(y=j.current)?void 0:y.selectionDirection]});n.useImperativeHandle(t,()=>j.current,[]),n.useEffect(()=>{let e=j.current,t=x.current;if(!e||!t)return;function r(){if(document.activeElement!==e){W(null),Q(null);return}let t=e.selectionStart,r=e.selectionEnd,n=e.selectionDirection,i=e.maxLength,o=e.value,s=H.current.prev,a=-1,l=-1,u;if(0!==o.length&&null!==t&&null!==r){let e=t===r,n=t===o.length&&o.length<i;if(e&&!n){if(0===t)a=0,l=1,u="forward";else if(t===i)a=t-1,l=t,u="backward";else if(i>1&&o.length>1){let e=0;if(null!==s[0]&&null!==s[1]){u=t<s[1]?"backward":"forward";let r=s[0]===s[1]&&s[0]<i;"backward"!==u||r||(e=-1)}a=e+t,l=e+t+1}}-1!==a&&-1!==l&&a!==l&&j.current.setSelectionRange(a,l,u)}let c=-1!==a?a:t,d=-1!==l?l:r,h=null!=u?u:n;W(c),Q(d),H.current.prev=[c,d,h]}if(G.current.value!==e.value&&G.current.onChange(e.value),H.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",r,{capture:!0}),r(),document.activeElement===e&&J(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";f(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),f(e.sheet,`[data-input-otp]:autofill { ${t} }`),f(e.sheet,`[data-input-otp]:-webkit-autofill { ${t} }`),f(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),f(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let n=()=>{t&&t.style.setProperty("--root-height",`${e.clientHeight}px`)};n();let i=new ResizeObserver(n);return i.observe(e),()=>{document.removeEventListener("selectionchange",r,{capture:!0}),i.disconnect()}},[]);let[K,q]=n.useState(!1),[B,J]=n.useState(!1),[$,W]=n.useState(null),[V,Q]=n.useState(null);n.useEffect(()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}(()=>{var e,t,r,n;null==(e=j.current)||e.dispatchEvent(new Event("input"));let i=null==(t=j.current)?void 0:t.selectionStart,o=null==(r=j.current)?void 0:r.selectionEnd,s=null==(n=j.current)?void 0:n.selectionDirection;null!==i&&null!==o&&(W(i),Q(o),H.current.prev=[i,o,s])})},[F,B]),n.useEffect(()=>{void 0!==L&&F!==L&&L.length<E&&F.length===E&&(null==I||I(F))},[E,I,L,F]);let z=function({containerRef:e,inputRef:t,pushPasswordManagerStrategy:r,isFocused:i}){let[o,s]=n.useState(!1),[a,l]=n.useState(!1),[u,c]=n.useState(!1),d=n.useMemo(()=>"none"!==r&&("increase-width"===r||"experimental-no-flickering"===r)&&o&&a,[o,a,r]),h=n.useCallback(()=>{let n=e.current,i=t.current;if(!n||!i||u||"none"===r)return;let o=n.getBoundingClientRect().left+n.offsetWidth,a=n.getBoundingClientRect().top+n.offsetHeight/2;0===document.querySelectorAll('[data-lastpass-icon-root],com-1password-button,[data-dashlanecreated],[style$="2147483647 !important;"]').length&&document.elementFromPoint(o-18,a)===n||(s(!0),c(!0))},[e,t,u,r]);return n.useEffect(()=>{let t=e.current;if(!t||"none"===r)return;function n(){l(window.innerWidth-t.getBoundingClientRect().right>=40)}n();let i=setInterval(n,1e3);return()=>{clearInterval(i)}},[e,r]),n.useEffect(()=>{let e=i||document.activeElement===t.current;if("none"===r||!e)return;let n=setTimeout(h,0),o=setTimeout(h,2e3),s=setTimeout(h,5e3),a=setTimeout(()=>{c(!0)},6e3);return()=>{clearTimeout(n),clearTimeout(o),clearTimeout(s),clearTimeout(a)}},[t,i,r,h]),{hasPWMBadge:o,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:x,inputRef:j,pushPasswordManagerStrategy:_,isFocused:B}),Z=n.useCallback(e=>{let t=e.currentTarget.value.slice(0,E);if(t.length>0&&D&&!D.test(t))return void e.preventDefault();"string"==typeof L&&t.length<L.length&&document.dispatchEvent(new Event("selectionchange")),M(t)},[E,M,L,D]),X=n.useCallback(()=>{var e;if(j.current){let t=Math.min(j.current.value.length,E-1),r=j.current.value.length;null==(e=j.current)||e.setSelectionRange(t,r),W(t),Q(r)}J(!0)},[E]),Y=n.useCallback(e=>{var t,r;let n=j.current;if(!S&&(!G.current.isIOS||!e.clipboardData||!n))return;let i=e.clipboardData.getData("text/plain"),o=S?S(i):i;e.preventDefault();let s=null==(t=j.current)?void 0:t.selectionStart,a=null==(r=j.current)?void 0:r.selectionEnd,l=(s!==a?F.slice(0,s)+o+F.slice(a):F.slice(0,s)+o+F.slice(s)).slice(0,E);if(l.length>0&&D&&!D.test(l))return;n.value=l,M(l);let u=Math.min(l.length,E-1),c=l.length;n.setSelectionRange(u,c),W(u),Q(c)},[E,M,D,F]),ee=n.useMemo(()=>({position:"relative",cursor:N.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[N.disabled]),et=n.useMemo(()=>({position:"absolute",inset:0,width:z.willPushPWMBadge?`calc(100% + ${z.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:z.willPushPWMBadge?`inset(0 ${z.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:A,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[z.PWM_BADGE_SPACE_WIDTH,z.willPushPWMBadge,A]),er=n.useMemo(()=>n.createElement("input",o(((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))u.call(t,r)&&c(e,r,t[r]);return e})({autoComplete:N.autoComplete||"one-time-code"},N),s({"data-input-otp":!0,"data-input-otp-placeholder-shown":0===F.length||void 0,"data-input-otp-mss":$,"data-input-otp-mse":V,inputMode:T,pattern:null==D?void 0:D.source,"aria-placeholder":b,style:et,maxLength:E,value:F,ref:j,onPaste:e=>{var t;Y(e),null==(t=N.onPaste)||t.call(N,e)},onChange:Z,onMouseOver:e=>{var t;q(!0),null==(t=N.onMouseOver)||t.call(N,e)},onMouseLeave:e=>{var t;q(!1),null==(t=N.onMouseLeave)||t.call(N,e)},onFocus:e=>{var t;X(),null==(t=N.onFocus)||t.call(N,e)},onBlur:e=>{var t;J(!1),null==(t=N.onBlur)||t.call(N,e)}}))),[Z,X,Y,T,et,E,V,$,N,null==D?void 0:D.source,F]),en=n.useMemo(()=>({slots:Array.from({length:E}).map((e,t)=>{var r;let n=B&&null!==$&&null!==V&&($===V&&t===$||t>=$&&t<V),i=void 0!==F[t]?F[t]:null;return{char:i,placeholderChar:void 0!==F[0]?null:null!=(r=null==b?void 0:b[t])?r:null,isActive:n,hasFakeCaret:n&&null===i}}),isFocused:B,isHovering:!N.disabled&&K}),[B,K,E,V,$,N.disabled,F]),ei=n.useMemo(()=>O?O(en):n.createElement(d.Provider,{value:en},k),[k,en,O]);return n.createElement(n.Fragment,null,null!==C&&n.createElement("noscript",null,n.createElement("style",null,C)),n.createElement("div",{ref:x,"data-input-otp-container":!0,style:ee,className:R},ei,n.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},er)))});function f(e,t){try{e.insertRule(t)}catch(e){console.error("input-otp could not insert CSS rule:",t)}}h.displayName="Input";var p=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,m="^\\d+$"},29257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterStandardClaims=t.STANDARD_CLAIMS=void 0,t.STANDARD_CLAIMS=["aud","auth_time","email","email_verified","exp","firebase","source_sign_in_provider","iat","iss","name","phone_number","picture","sub","uid","user_id"],t.filterStandardClaims=(e={})=>{let r={};return Object.keys(e).forEach(n=>{t.STANDARD_CLAIMS.includes(n)||(r[n]=e[n])}),r}},36923:(e,t,r)=>{r.d(t,{X:()=>a,k:()=>l});var n=r(54338),i=r(24639),o=r(62934),s=r(19350),a=class extends s.k{#e;#t;#r;#n;#i;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#r.remove(this)}setData(e,t){let r=(0,n.pl)(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(n.lQ).catch(n.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>!1!==(0,n.Eh)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,n.d2)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,n.j3)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&this.#i?.status()!=="rejected"){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let r=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},s=()=>{let e=(0,n.ZM)(this.options,t),r=(()=>{let e={client:this.#n,queryKey:this.queryKey,meta:this.meta};return i(e),e})();return(this.#s=!1,this.options.persister)?this.options.persister(e,r,this):e(r)},a=(()=>{let e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:s};return i(e),e})();this.options.behavior?.onFetch(a,this),this.#t=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#a({type:"fetch",meta:a.fetchOptions?.meta}),this.#i=(0,o.II)({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{let e=await this.#i.start();if(void 0===e)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#r.config.onSuccess?.(e,this),this.#r.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof o.cc){if(e.silent)return this.#i.promise;else if(e.revert){if(this.setState({...this.#t,fetchStatus:"idle"}),void 0===this.state.data)throw e;return this.state.data}}throw this.#a({type:"error",error:e}),this.#r.config.onError?.(e,this),this.#r.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#a(e){let t=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...l(t.data,this.options),fetchMeta:e.meta??null};case"success":let r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":let n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=t(this.state),i.jG.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function l(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,o.v_)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}},39782:(e,t,r)=>{r.d(t,{u:()=>a});var n=r(85546),i=r(38979),o=r(72038);function s(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function a(e,t,r){if(void 0===r&&(r={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(o,a,l){try{return Promise.resolve(s(function(){return Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](o,t)).then(function(e){return l.shouldUseNativeValidation&&(0,n.w)({},l),{errors:{},values:r.raw?Object.assign({},o):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:(0,n.H)(function(e,t){for(var r={};e.length;){var n=e[0],o=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[a]={message:l.message,type:l.code}}else r[a]={message:s,type:o};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var u=r[a].types,c=u&&u[n.code];r[a]=(0,i.Gb)(a,t,r,o,c?[].concat(c,n.message):n.message)}e.shift()}return r}(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(a,l,u){try{return Promise.resolve(s(function(){return Promise.resolve(("sync"===r.mode?o.parse:o.parseAsync)(e,a,t)).then(function(e){return u.shouldUseNativeValidation&&(0,n.w)({},u),{errors:{},values:r.raw?Object.assign({},a):e}})},function(e){if(e instanceof o.$ZodError)return{values:{},errors:(0,n.H)(function(e,t){for(var r={};e.length;){var n=e[0],o=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("invalid_union"===n.code&&n.errors.length>0){var l=n.errors[0][0];r[a]={message:l.message,type:l.code}}else r[a]={message:s,type:o};if("invalid_union"===n.code&&n.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var u=r[a].types,c=u&&u[n.code];r[a]=(0,i.Gb)(a,t,r,o,c?[].concat(c,n.message):n.message)}e.shift()}return r}(e.issues,!u.shouldUseNativeValidation&&"all"===u.criteriaMode),u)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}},47231:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableDebugMode=function(){r=!0},t.debug=function(e,t){if(r&&(console.log("â“˜ next-firebase-auth-edge:",e),t))for(let e in t)t[e]&&console.log("	",`${e}:`,t[e])};let r=!1},47821:(e,t,r)=>{var n=r(40074);function i(){if(void 0!==n)return n.env.FIREBASE_AUTH_EMULATOR_HOST}Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_CERT_URL=t.FIREBASE_AUDIENCE=void 0,t.emulatorHost=i,t.useEmulator=function(){return!!i()},t.FIREBASE_AUDIENCE="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",t.CLIENT_CERT_URL="https://www.googleapis.com/robot/v1/metadata/x509/securetoken@system.gserviceaccount.com"},48107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sign=a,t.signBlob=c;let n=r(21293),i=r(46342),o=r(12577),s=r(16223);async function a({payload:e,privateKey:t,keyId:r}){let o;try{o=await (0,n.importPKCS8)(t,s.ALGORITHM_RS256)}catch(e){throw i.AuthError.fromError(e,i.AuthErrorCode.INVALID_ARGUMENT,"It looks like the value provided for `serviceAccount.privateKey` is incorrectly formatted. Please double-check if private key has correct format. See https://github.com/awinogrodzki/next-firebase-auth-edge/issues/246#issuecomment-2321559620 for details")}return new n.SignJWT(e).setProtectedHeader({alg:s.ALGORITHM_RS256,kid:r}).sign(o)}function l(e){return e.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function u(e){let t=JSON.stringify(e);return l(n.base64url.encode(t))}async function c({payload:e,serviceAccountId:t,accessToken:r}){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${t}:signBlob`,a={alg:s.ALGORITHM_RS256,typ:"JWT"},c=`${u(a)}.${u(e)}`,d={method:"POST",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify({payload:n.base64url.encode(c)})},h=await (0,o.fetchAny)(i,d),f=await h.blob(),{signedBlob:p}=JSON.parse(await f.text());return`${c}.${l(p)}`}},53263:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthRequestHandler=t.AbstractAuthRequestHandler=t.FIREBASE_AUTH_LIST_USERS_INFO=t.FIREBASE_AUTH_SIGN_UP_NEW_USER=t.FIREBASE_AUTH_SET_ACCOUNT_INFO=t.FIREBASE_AUTH_DELETE_ACCOUNT=t.FIREBASE_AUTH_GET_ACCOUNT_INFO=t.FIREBASE_AUTH_CREATE_SESSION_COOKIE=t.ApiSettings=void 0,t.getSdkVersion=u,t.convertMultiFactorInfoToServerFormat=p;let n=r(53825),i=r(46342),o=r(47821),s=r(12577),a=r(10586);class l{endpoint;httpMethod;constructor(e,t="POST"){this.endpoint=e,this.httpMethod=t}getEndpoint(){return this.endpoint}getHttpMethod(){return this.httpMethod}}function u(){return"11.2.0"}t.ApiSettings=l;let c={"X-Client-Version":`Node/Admin/${u()}`,Accept:"application/json","Content-Type":"application/json"};class d{version;credential;urlFormat;constructor(e="v1",t){this.version=e,this.credential=t,(0,o.useEmulator)()?this.urlFormat=(0,s.formatString)("http://{host}/identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",{host:(0,o.emulatorHost)()}):this.urlFormat="https://identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}"}async getUrl(e,t){let r={version:this.version,projectId:await this.credential.getProjectId(),api:e||""},n=(0,s.formatString)(this.urlFormat,r);return(0,s.formatString)(n,t||{})}}t.FIREBASE_AUTH_CREATE_SESSION_COOKIE=new l(":createSessionCookie","POST"),t.FIREBASE_AUTH_GET_ACCOUNT_INFO=new l("/accounts:lookup","POST"),t.FIREBASE_AUTH_DELETE_ACCOUNT=new l("/accounts:delete","POST"),t.FIREBASE_AUTH_SET_ACCOUNT_INFO=new l("/accounts:update","POST"),t.FIREBASE_AUTH_SIGN_UP_NEW_USER=new l("/accounts","POST"),t.FIREBASE_AUTH_LIST_USERS_INFO=new l("/accounts:batchGet","GET");class h{options;authUrlBuilder;getToken;static getErrorCode(e){return(0,a.isNonNullObject)(e)&&e.error&&e.error.message||null}constructor(e,t={}){this.options=t,this.getToken=(0,o.useEmulator)()?()=>Promise.resolve({accessToken:"owner",expirationTime:1/0}):(0,n.getFirebaseAdminTokenProvider)(e).getToken}prepareRequest(e){return this.options.tenantId?{...e,tenantId:this.options.tenantId}:e}getAccountInfoByUid(e){return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,{localId:[e]})}deleteAccount(e){return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_DELETE_ACCOUNT,{localId:e})}getAccountInfoByEmail(e){return(0,a.isEmail)(e)?this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,{email:[e]}):Promise.reject(new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,"Invalid e-mail address"))}createNewAccount(e){let r={...e};if(void 0!==r.photoURL&&(r.photoUrl=r.photoURL,delete r.photoURL),void 0!==r.uid&&(r.localId=r.uid,delete r.uid),r.multiFactor){if(Array.isArray(r.multiFactor.enrolledFactors)&&r.multiFactor.enrolledFactors.length>0){let e=[];try{r.multiFactor.enrolledFactors.forEach(t=>{if("enrollmentTime"in t)throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,'"enrollmentTime" is not supported when adding second factors via "createUser()"');if("uid"in t)throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,'"uid" is not supported when adding second factors via "createUser()"');e.push(p(t))})}catch(e){return Promise.reject(e)}r.mfaInfo=e}delete r.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SIGN_UP_NEW_USER,r).then(e=>e.localId)}createSessionCookie(e,r){return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_CREATE_SESSION_COOKIE,{idToken:e,validDuration:r/1e3}).then(e=>e.sessionCookie)}updateExistingAccount(e,r){let n={...r,deleteAttribute:[],localId:e},i={displayName:"DISPLAY_NAME",photoURL:"PHOTO_URL"};for(let e in n.deleteAttribute=[],i)null===n[e]&&(n.deleteAttribute.push(i[e]),delete n[e]);if(0===n.deleteAttribute.length&&delete n.deleteAttribute,null===n.phoneNumber&&(n.deleteProvider?n.deleteProvider.push("phone"):n.deleteProvider=["phone"],delete n.phoneNumber),void 0!==n.providerToLink&&(n.linkProviderUserInfo={...n.providerToLink},delete n.providerToLink,n.linkProviderUserInfo.rawId=n.linkProviderUserInfo.uid,delete n.linkProviderUserInfo.uid),void 0!==n.providersToUnlink&&(Array.isArray(n.deleteProvider)||(n.deleteProvider=[]),n.deleteProvider=n.deleteProvider.concat(n.providersToUnlink),delete n.providersToUnlink),void 0!==n.photoURL&&(n.photoUrl=n.photoURL,delete n.photoURL),void 0!==n.disabled&&(n.disableUser=n.disabled,delete n.disabled),n.multiFactor){if(null===n.multiFactor.enrolledFactors)n.mfa={};else if(Array.isArray(n.multiFactor.enrolledFactors)){n.mfa={enrollments:[]};try{n.multiFactor.enrolledFactors.forEach(e=>{n.mfa.enrollments.push(p(e))})}catch(e){return Promise.reject(e)}0===n.mfa.enrollments.length&&delete n.mfa.enrollments}delete n.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SET_ACCOUNT_INFO,n).then(e=>e.localId)}setCustomUserClaims(e,r){null===r&&(r={});let n={localId:e,customAttributes:JSON.stringify(r)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SET_ACCOUNT_INFO,n).then(e=>e.localId)}listUsers(e,r){return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_LIST_USERS_INFO,{nextPageToken:e,maxResults:r})}getSearchParams(e){let t=new URLSearchParams;for(let r in e)e[r]&&t.append(r,e[r]);return t}decorateUrlWithParams(e,t){let r=this.getSearchParams(t).toString();return r?`${e}?${r}`:e}async invokeRequestHandler(e,t,r,n){let o=await e.getUrl(t.getEndpoint(),n),s=await this.getToken(),a={method:t.getHttpMethod(),headers:{...c,Authorization:`Bearer ${s.accessToken}`}};r&&!["GET","HEAD"].includes(t.getHttpMethod())&&(a.body=JSON.stringify(this.prepareRequest(r))),r&&["GET","HEAD"].includes(t.getHttpMethod())&&(o=this.decorateUrlWithParams(o,this.prepareRequest(r)));let l=await fetch(o,a);if(!l.ok){let e=await l.json(),t=h.getErrorCode(e);if(!t)throw new i.AuthError(i.AuthErrorCode.INTERNAL_ERROR,`Error returned from server: ${JSON.stringify(e)}.`);throw new i.AuthError(i.AuthErrorCode.INTERNAL_ERROR,`Error returned from server: ${JSON.stringify(e)}. Code: ${t}`)}return await l.json()}getAuthUrlBuilder(){return this.authUrlBuilder||(this.authUrlBuilder=this.newAuthUrlBuilder()),this.authUrlBuilder}}t.AbstractAuthRequestHandler=h;class f extends h{credential;authResourceUrlBuilder;constructor(e,t){super(e,t),this.credential=e,this.authResourceUrlBuilder=new d("v2",e)}newAuthUrlBuilder(){return new d("v1",this.credential)}}function p(e){let t;if(void 0!==e.enrollmentTime)if(function(e){try{return!!e&&new Date(e).toUTCString()===e}catch{return!1}}(e.enrollmentTime))t=new Date(e.enrollmentTime).toISOString();else throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,`The second factor "enrollmentTime" for "${e.uid}" must be a valid UTC date string.`);if("phone"===e.factorId){let r={mfaEnrollmentId:e.uid,displayName:e.displayName,phoneInfo:e.phoneNumber,enrolledAt:t};for(let e in r)void 0===r[e]&&delete r[e];return r}throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,`Unsupported second factor "${JSON.stringify(e)}" provided.`)}t.AuthRequestHandler=f},53825:(e,t,r)=>{var n=r(40074);Object.defineProperty(t,"__esModule",{value:!0}),t.getFirebaseAdminTokenProvider=t.ComputeEngineCredential=t.ServiceAccountCredential=void 0,t.getExplicitProjectId=function(){let e=n.env.GOOGLE_CLOUD_PROJECT||n.env.GCLOUD_PROJECT;return e||null};let i=r(48107),o=r(12577),s=new Map;class a{projectId;privateKey;clientEmail;constructor(e){this.projectId=e.projectId,this.privateKey=e.privateKey,this.clientEmail=e.clientEmail}async fetchAccessToken(e){let t=await this.createJwt();return l(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${t}`,Accept:"application/json"},body:"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion="+t})}getProjectId(){return Promise.resolve(this.projectId)}getServiceAccountEmail(){return Promise.resolve(this.clientEmail)}async fetchAndCacheAccessToken(e){let t=await this.fetchAccessToken(e);return s.set(e.toString(),t),t}async getAccessToken(e){let t="https://accounts.google.com/o/oauth2/token";if(e)return this.fetchAndCacheAccessToken(t);let r=s.get(t);return!r||r.expirationTime-Date.now()<=3e5?this.fetchAndCacheAccessToken(t):r}async createJwt(){let e=Math.floor(Date.now()/1e3),t={aud:"https://accounts.google.com/o/oauth2/token",iat:e,exp:e+3600,iss:this.clientEmail,sub:this.clientEmail,scope:"https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/firebase.database https://www.googleapis.com/auth/firebase.messaging https://www.googleapis.com/auth/identitytoolkit https://www.googleapis.com/auth/userinfo.email"};return(0,i.sign)({payload:t,privateKey:this.privateKey})}}async function l(e,t){let r=await (0,o.fetchJson)(e,t);if(!r.access_token||!r.expires_in)throw Error(`Unexpected response while fetching access token: ${JSON.stringify(r)}`);return{accessToken:r.access_token,expirationTime:Date.now()+1e3*r.expires_in}}t.ServiceAccountCredential=a;let u="metadata.google.internal";async function c(e,t){let r=await (0,o.fetchText)(e,t);if(!r)throw Error("Unexpected response while fetching id token: response.text is undefined");return r}class d{projectId;accountId;cachedToken;constructor(){}async getAccessToken(e=!1){let t=`http://${u}/computeMetadata/v1/instance/service-accounts/default/token`,r=this.buildRequest();return this.cachedToken&&!e&&this.cachedToken.expirationTime-Date.now()<=3e5?this.cachedToken:this.cachedToken=await l(t,r)}getIDToken(e){return c(`http://${u}/computeMetadata/v1/instance/service-accounts/default/identity?audience=${e}`,this.buildRequest())}async getProjectId(){if(this.projectId)return Promise.resolve(this.projectId);let e=`http://${u}/computeMetadata/v1/project/project-id`,t=this.buildRequest();try{let r=await (0,o.fetchText)(e,t);return this.projectId=r,this.projectId}catch(e){throw Error(`Failed to determine project ID: ${e}`)}}async getServiceAccountEmail(){if(this.accountId)return Promise.resolve(this.accountId);let e=`http://${u}/computeMetadata/v1/instance/service-accounts/default/email`,t=this.buildRequest();try{let r=await (0,o.fetchText)(e,t);return this.accountId=r,this.accountId}catch(e){throw Error(`Failed to determine service account email: ${e}`)}}buildRequest(){return{method:"GET",headers:{"Metadata-Flavor":"Google"}}}}t.ComputeEngineCredential=d,t.getFirebaseAdminTokenProvider=e=>({getToken:async function(t=!1){return e.getAccessToken(t)}})},56747:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeySignatureVerifier=t.JWKSSignatureVerifier=t.UrlKeyFetcher=void 0,t.fetchPublicKey=f;let n=r(21293),i=r(47231),o=r(46342),s=r(47821),a=r(16223),l=r(10586),u=new Map;class c{clientCertUrl;constructor(e){if(this.clientCertUrl=e,!(0,l.isURL)(e))throw Error("The provided public client certificate URL is not a valid URL.")}async fetchPublicKeysResponse(e){let t=await fetch(e),r={};if(t.headers.forEach((e,t)=>{r[t]=e}),(0,i.debug)("Public keys fetched",{responseHeaders:r,cryptoRuntime:n.cryptoRuntime}),!t.ok){let e="Error fetching public keys for Google certs: ",r=await t.json();throw r.error?(e+=`${r.error}`,r.error_description&&(e+=" ("+r.error_description+")")):e+=`${await t.text()}`,Error(e)}let o=await t.json();if(o.error)throw Error("Error fetching public keys for Google certs: "+o.error);return{keys:o,expiresAt:function(e){if(!e.headers.has("cache-control"))return 0;let t=e.headers.get("cache-control").split(",").reduce((e,t)=>{let r=t.trim().split("=");return"max-age"===r[0]?+r[1]:e},0);return Date.now()+1e3*t}(t)}}async fetchAndCachePublicKeys(e){(0,i.debug)("No public keys found in cache. Fetching public keys from Google...",{cryptoRuntime:n.cryptoRuntime});let t=await this.fetchPublicKeysResponse(e);return u.set(e.toString(),t),(0,i.debug)("Public keys cached",{cacheKey:e.toString(),expiresAt:t.expiresAt,cryptoRuntime:n.cryptoRuntime}),t.keys}async fetchPublicKeys(){let e=new URL(this.clientCertUrl),t=u.get(e.toString());if(!t)return this.fetchAndCachePublicKeys(e);let{keys:r,expiresAt:o}=t,s=Date.now();return((0,i.debug)("Get public keys from cache",{expiresAt:o,now:s,cryptoRuntime:n.cryptoRuntime}),o<=s)?this.fetchAndCachePublicKeys(e):r}}t.UrlKeyFetcher=c;class d{options;jwksUrl;constructor(e,t){if(this.options=t,!(0,l.isURL)(e))throw Error("The provided JWKS URL is not a valid URL.");this.jwksUrl=new URL(e)}async getPublicKey(e){return(0,n.createRemoteJWKSet)(this.jwksUrl,this.options)(e)}async verify(e,t){let r=(0,n.decodeProtectedHeader)(e);try{await (0,a.verify)(e,()=>this.getPublicKey(r),t)}catch(r){if(r instanceof n.errors.JWKSMultipleMatchingKeys){for await(let i of r)try{await (0,a.verify)(e,()=>Promise.resolve(i),t);return}catch(e){if(e instanceof n.errors.JWSSignatureVerificationFailed)continue;throw e}throw new n.errors.JWSSignatureVerificationFailed}throw r}}}t.JWKSSignatureVerifier=d;class h{keyFetcher;constructor(e){if(this.keyFetcher=e,!(0,l.isNonNullObject)(e))throw Error("The provided key fetcher is not an object or null.")}static withCertificateUrl(e){return new h(new c(e))}async getPublicKey(e){return(0,s.useEmulator)()?{type:"none"}:f(this.keyFetcher,e).then(a.getPublicCryptoKey)}async verify(e,t){let r=(0,n.decodeProtectedHeader)(e);try{await (0,a.verify)(e,()=>this.getPublicKey(r),t)}catch(r){if(r instanceof o.AuthError&&r.code===o.AuthErrorCode.NO_KID_IN_HEADER)return void await this.verifyWithoutKid(e,t);throw r}}async verifyWithoutKid(e,t){let r=await this.keyFetcher.fetchPublicKeys();return this.verifyWithAllKeys(e,r,t)}async verifyWithAllKeys(e,t,r){let i=[];return Object.values(t).forEach(t=>{let o=(0,a.verify)(e,async()=>(0,a.getPublicCryptoKey)(t),r).then(()=>!0).catch(e=>{if(e instanceof n.errors.JWTExpired)throw e;return!1});i.push(o)}),Promise.all(i).then(e=>{if(e.every(e=>!1===e))throw new o.AuthError(o.AuthErrorCode.INVALID_SIGNATURE)})}}async function f(e,t){if(!t.kid)throw new o.AuthError(o.AuthErrorCode.NO_KID_IN_HEADER);let r=t.kid,n=await e.fetchPublicKeys();if(!Object.prototype.hasOwnProperty.call(n,r))throw new o.AuthError(o.AuthErrorCode.NO_MATCHING_KID);return n[r]}t.PublicKeySignatureVerifier=h},56862:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){var i,o,s;function a(r){e.removeListener(t,l),n(r)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}m(e,t,l,{once:!0}),"error"!==t&&(i=e,o=a,s={once:!0},"function"==typeof i.on&&m(i,"error",o,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,u=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var u=l.length,c=p(l,u),r=0;r<u;++r)n(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},65972:function(e,t,r){var n=r(40074),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.customTokenToIdAndRefreshTokens=y,t.createAnonymousAccount=g,t.isUserNotFoundError=function(e){return e?.code===d.AuthErrorCode.USER_NOT_FOUND},t.isInvalidCredentialError=function(e){return e?.code===d.AuthErrorCode.INVALID_CREDENTIAL},t.handleExpiredToken=A,t.getFirebaseAuth=function(e,t,r){return e.privateKey&&e.projectId&&e.clientEmail?b({credential:new u.ServiceAccountCredential(e),apiKey:t,tenantId:r}):b({credential:e.serviceAccount?new u.ServiceAccountCredential(e.serviceAccount):(0,c.getApplicationDefault)(),apiKey:e.apiKey,tenantId:e.tenantId,serviceAccountId:e.serviceAccountId,enableCustomToken:e.enableCustomToken})};let s=r(47231),a=r(53263),l=r(29257),u=r(53825),c=r(87685),d=r(46342),h=r(47821),f=r(94493),p=r(84918),m=r(77067);async function y(e,t,r){let i={"Content-Type":"application/json",...r.referer?{Referer:r.referer}:{}},o={token:e,returnSecureToken:!0};r.appCheckToken&&(i["X-Firebase-AppCheck"]=r.appCheckToken),r.tenantId&&(o.tenantId=r.tenantId);let s=await fetch((e=>{if((0,h.useEmulator)()&&n.env.FIREBASE_AUTH_EMULATOR_HOST){let t="http://";return n.env.FIREBASE_AUTH_EMULATOR_HOST.startsWith("http://")&&(t=""),`${t}${n.env.FIREBASE_AUTH_EMULATOR_HOST}/identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${e}`}return`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${e}`})(t),{method:"POST",headers:i,body:JSON.stringify(o)}),a=await s.json();if(!s.ok)throw Error(`Problem getting a refresh token: ${JSON.stringify(a)}`);return{idToken:a.idToken,refreshToken:a.refreshToken}}async function g(e,t={}){let r={"Content-Type":"application/json",...t.referer?{Referer:t.referer}:{}},n={returnSecureToken:!0};t.appCheckToken&&(r["X-Firebase-AppCheck"]=t.appCheckToken),t.tenantId&&(n.tenantId=t.tenantId);let i=await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${e}`,{method:"POST",headers:r,body:JSON.stringify(n)});return await i.json()}o(r(46342),t),o(r(8933),t);let v=async(e,t)=>{let r=await fetch((e=>{if((0,h.useEmulator)()&&n.env.FIREBASE_AUTH_EMULATOR_HOST){let t="http://";return n.env.FIREBASE_AUTH_EMULATOR_HOST.startsWith("http://")&&(t=""),`${t}${n.env.FIREBASE_AUTH_EMULATOR_HOST}/securetoken.googleapis.com/v1/token?key=${e}`}return`https://securetoken.googleapis.com/v1/token?key=${e}`})(t.apiKey),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",...t.referer?{Referer:t.referer}:{}},body:`grant_type=refresh_token&refresh_token=${e}`});if(!r.ok){let e=await r.json(),t=`Error fetching access token: ${JSON.stringify(e.error)} ${e.error_description?`(${e.error_description})`:""}`;if(e?.error?.code===400&&e?.error?.message==="USER_NOT_FOUND")throw new d.AuthError(d.AuthErrorCode.USER_NOT_FOUND);throw new d.AuthError(d.AuthErrorCode.INVALID_CREDENTIAL,t)}let i=await r.json();return{idToken:i.id_token,refreshToken:i.refresh_token}};async function E(e,t,r){try{return await t(e)}catch(e){return r(e)}}async function A(e,t,r,n){try{return await e()}catch(e){switch(e?.code){case d.AuthErrorCode.NO_MATCHING_KID:if(n)return E(e,async e=>{let r=await t(e);return(0,s.debug)("experimental_refresh_on_expired_kid: Successfully refreshed token after kid has expired"),r},e=>((0,s.debug)("experimental_refresh_on_expired_kid: Error when trying to refresh token after kid has expired",{message:e?.message,stack:e?.stack}),r(e)));return r(e);case d.AuthErrorCode.TOKEN_EXPIRED:return E(e,t,r);default:return r(e)}}}let w={referer:""};function b(e){let t=e.credential??(0,c.getApplicationDefault)(),r=e.tenantId,n=new a.AuthRequestHandler(t,{tenantId:r}),i=(0,f.createFirebaseTokenGenerator)(t,r),o=async(t,r={})=>{let{idToken:n,refreshToken:i}=await v(t,{apiKey:e.apiKey,referer:r.referer}),o=await b(n,{referer:r.referer});if(!r.enableCustomToken)return{decodedIdToken:o,idToken:n,refreshToken:i};let s=await T(o.uid,{email_verified:o.email_verified,source_sign_in_provider:o.firebase.sign_in_provider});return{decodedIdToken:o,idToken:n,refreshToken:i,customToken:s}};async function u(e,t){return r&&await b(e),n.createSessionCookie(e,t)}async function h(e){return n.getAccountInfoByUid(e).then(e=>e.users?.length?new m.UserRecord(e.users[0]):null)}async function E(e){return h(e.sub).then(t=>{if(!t)throw new d.AuthError(d.AuthErrorCode.USER_NOT_FOUND);if(t.disabled)throw new d.AuthError(d.AuthErrorCode.USER_DISABLED);if(t.tokensValidAfterTime&&1e3*e.auth_time<new Date(t.tokensValidAfterTime).getTime())throw new d.AuthError(d.AuthErrorCode.TOKEN_REVOKED);return e})}async function b(e,n=w){let i=await t.getProjectId(),o=(0,p.createIdTokenVerifier)(i,r),s=await o.verifyJWT(e,n);return n.checkRevoked?E(s):s}function T(e,t){return i.createCustomToken(e,t)}async function I(t,r=w){let n=await b(t,{referer:r.referer}),i=(0,l.filterStandardClaims)(n);r.dynamicCustomClaimsKeys?.length&&r.dynamicCustomClaimsKeys.forEach(e=>{delete i[e]});let o=await T(n.uid,{...i,email_verified:n.email_verified,source_sign_in_provider:n.firebase.sign_in_provider});return(0,s.debug)("Generated custom token based on provided idToken",{customToken:o}),{...await y(o,e.apiKey,{tenantId:e.tenantId,appCheckToken:r.appCheckToken,referer:r.referer}),customToken:o}}async function _(e){return n.createNewAccount(e).then(e=>h(e)).then(e=>{if(!e)throw new d.AuthError(d.AuthErrorCode.INTERNAL_ERROR,"Could not get recently created user from database. Most likely it was deleted.");return e})}async function S(e,t){return n.updateExistingAccount(e,t).then(e=>h(e)).then(e=>{if(!e)throw new d.AuthError(d.AuthErrorCode.INTERNAL_ERROR,"Could not get recently updated user from database. Most likely it was deleted.");return e})}return{verifyAndRefreshExpiredIdToken:async function(t,r=w){return await A(async()=>{let e=await b(t.idToken,r);return{idToken:t.idToken,decodedIdToken:e,refreshToken:t.refreshToken,customToken:t.customToken}},async()=>{if(t.refreshToken){let n=await o(t.refreshToken,{referer:r.referer,enableCustomToken:e.enableCustomToken});return await r.onTokenRefresh?.(n),n}throw new d.InvalidTokenError(d.InvalidTokenReason.MISSING_REFRESH_TOKEN)},async e=>{if(e instanceof d.AuthError&&e.code===d.AuthErrorCode.NO_MATCHING_KID)throw d.InvalidTokenError.fromError(e,d.InvalidTokenReason.INVALID_KID);throw d.InvalidTokenError.fromError(e,d.InvalidTokenReason.INVALID_CREDENTIALS)},r.enableTokenRefreshOnExpiredKidHeader??!1)},verifyIdToken:b,createCustomToken:T,getCustomIdAndRefreshTokens:I,handleTokenRefresh:o,deleteUser:async function(e){await n.deleteAccount(e)},setCustomUserClaims:async function(e,t){await n.setCustomUserClaims(e,t)},getUser:h,getUserByEmail:async function(e){return n.getAccountInfoByEmail(e).then(e=>{if(!e.users||!e.users.length)throw new d.AuthError(d.AuthErrorCode.USER_NOT_FOUND);return new m.UserRecord(e.users[0])})},updateUser:S,createUser:_,createAnonymousUser:async function(e){return g(e)},listUsers:async function(e,t){return n.listUsers(e,t).then(e=>{let t={users:e.users.map(e=>new m.UserRecord(e))};return e.nextPageToken&&(t.nextPageToken=e.nextPageToken),t})},createSessionCookie:u}}},70301:(e,t,r)=>{r.d(t,{PL:()=>i,RQ:()=>l,rB:()=>a});var n=r(54338);function i(e){return{onFetch:(t,r)=>{let i=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],u=t.state.data?.pageParams||[],c={pages:[],pageParams:[]},d=0,h=async()=>{let r=!1,h=(0,n.ZM)(t.options,t.fetchOptions),f=async(e,i,o)=>{if(r)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);let s=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:o?"backward":"forward",meta:t.options.meta};return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),a=await h(s),{maxPages:l}=t.options,u=o?n.ZZ:n.y9;return{pages:u(e.pages,a,l),pageParams:u(e.pageParams,i,l)}};if(a&&l.length){let e="backward"===a,t={pages:l,pageParams:u},r=(e?s:o)(i,t);c=await f(t,r,e)}else{let t=e??l.length;do{let e=0===d?u[0]??i.initialPageParam:o(i,c);if(d>0&&null==e)break;c=await f(c,e),d++}while(d<t)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=h}}}function o(e,{pages:t,pageParams:r}){let n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function s(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function a(e,t){return!!t&&null!=o(e,t)}function l(e,t){return!!t&&!!e.getPreviousPageParam&&null!=s(e,t)}},77067:(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UserRecord=t.UserInfo=t.UserMetadata=t.MultiFactorSettings=t.PhoneMultiFactorInfo=t.MultiFactorInfo=void 0;let i=r(12577),o=r(10586),s=r(21293),a=r(46342),l=s.base64url.encode("REDACTED");function u(e){try{let t=new Date(parseInt(e,10));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}return null}(n||(n={})).Phone="phone";class c{uid;displayName;factorId;enrollmentTime;static initMultiFactorInfo(e){let t=null;try{t=new d(e)}catch{return null}return t}constructor(e){this.initFromServerResponse(e)}toJSON(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}}initFromServerResponse(e){let t=e&&this.getFactorId(e);if(!t||!e||!e.mfaEnrollmentId)throw new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor info response");(0,i.addReadonlyGetter)(this,"uid",e.mfaEnrollmentId),(0,i.addReadonlyGetter)(this,"factorId",t),(0,i.addReadonlyGetter)(this,"displayName",e.displayName),e.enrolledAt?(0,i.addReadonlyGetter)(this,"enrollmentTime",new Date(e.enrolledAt).toUTCString()):(0,i.addReadonlyGetter)(this,"enrollmentTime",null)}}t.MultiFactorInfo=c;class d extends c{phoneNumber;constructor(e){super(e),(0,i.addReadonlyGetter)(this,"phoneNumber",e.phoneInfo)}toJSON(){return Object.assign(super.toJSON(),{phoneNumber:this.phoneNumber})}getFactorId(e){return e&&e.phoneInfo?n.Phone:null}}t.PhoneMultiFactorInfo=d;class h{enrolledFactors;constructor(e){let t=[];if((0,o.isNonNullObject)(e))e.mfaInfo&&e.mfaInfo.forEach(e=>{let r=c.initMultiFactorInfo(e);r&&t.push(r)});else throw new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor response");(0,i.addReadonlyGetter)(this,"enrolledFactors",Object.freeze(t))}toJSON(){return{enrolledFactors:this.enrolledFactors.map(e=>e.toJSON())}}}t.MultiFactorSettings=h;class f{creationTime;lastSignInTime;lastRefreshTime;constructor(e){(0,i.addReadonlyGetter)(this,"creationTime",u(e.createdAt)),(0,i.addReadonlyGetter)(this,"lastSignInTime",u(e.lastLoginAt));let t=e.lastRefreshAt?new Date(e.lastRefreshAt).toUTCString():null;(0,i.addReadonlyGetter)(this,"lastRefreshTime",t)}toJSON(){return{lastSignInTime:this.lastSignInTime,creationTime:this.creationTime,lastRefreshTime:this.lastRefreshTime}}}t.UserMetadata=f;class p{uid;displayName;email;photoURL;providerId;phoneNumber;constructor(e){if(!e.rawId||!e.providerId)throw new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user info response");(0,i.addReadonlyGetter)(this,"uid",e.rawId),(0,i.addReadonlyGetter)(this,"displayName",e.displayName),(0,i.addReadonlyGetter)(this,"email",e.email),(0,i.addReadonlyGetter)(this,"photoURL",e.photoUrl),(0,i.addReadonlyGetter)(this,"providerId",e.providerId),(0,i.addReadonlyGetter)(this,"phoneNumber",e.phoneNumber)}toJSON(){return{uid:this.uid,displayName:this.displayName,email:this.email,photoURL:this.photoURL,providerId:this.providerId,phoneNumber:this.phoneNumber}}}t.UserInfo=p;class m{uid;email;emailVerified;displayName;photoURL;phoneNumber;disabled;metadata;providerData;passwordHash;passwordSalt;customClaims;tenantId;tokensValidAfterTime;multiFactor;constructor(e){if(!e.localId)throw new a.AuthError(a.AuthErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user response");(0,i.addReadonlyGetter)(this,"uid",e.localId),(0,i.addReadonlyGetter)(this,"email",e.email),(0,i.addReadonlyGetter)(this,"emailVerified",!!e.emailVerified),(0,i.addReadonlyGetter)(this,"displayName",e.displayName),(0,i.addReadonlyGetter)(this,"photoURL",e.photoUrl),(0,i.addReadonlyGetter)(this,"phoneNumber",e.phoneNumber),(0,i.addReadonlyGetter)(this,"disabled",e.disabled||!1),(0,i.addReadonlyGetter)(this,"metadata",new f(e));let t=[];for(let r of e.providerUserInfo||[])t.push(new p(r));(0,i.addReadonlyGetter)(this,"providerData",t),e.passwordHash===l?(0,i.addReadonlyGetter)(this,"passwordHash",void 0):(0,i.addReadonlyGetter)(this,"passwordHash",e.passwordHash),(0,i.addReadonlyGetter)(this,"passwordSalt",e.salt),e.customAttributes&&(0,i.addReadonlyGetter)(this,"customClaims",JSON.parse(e.customAttributes));let r=null;void 0!==e.validSince&&(r=u(1e3*parseInt(e.validSince,10))),(0,i.addReadonlyGetter)(this,"tokensValidAfterTime",r||void 0),(0,i.addReadonlyGetter)(this,"tenantId",e.tenantId);let n=new h(e);n.enrolledFactors.length>0&&(0,i.addReadonlyGetter)(this,"multiFactor",n)}toJSON(){let e={uid:this.uid,email:this.email,emailVerified:this.emailVerified,displayName:this.displayName,photoURL:this.photoURL,phoneNumber:this.phoneNumber,disabled:this.disabled,metadata:this.metadata.toJSON(),passwordHash:this.passwordHash,passwordSalt:this.passwordSalt,customClaims:(0,i.deepCopy)(this.customClaims),tokensValidAfterTime:this.tokensValidAfterTime,tenantId:this.tenantId};for(let t of(this.multiFactor&&(e.multiFactor=this.multiFactor.toJSON()),e.providerData=[],this.providerData))e.providerData.push(t.toJSON());return e}}t.UserRecord=m},83937:(e,t,r)=>{r.d(t,{i:()=>a}),new TextEncoder;let n=new TextDecoder;class i extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class o extends i{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class s extends i{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function a(e){let t,r;if("string"!=typeof e)throw new o("JWTs must use Compact JWS serialization, JWT must be a string");let{1:i,length:s}=e.split(".");if(5===s)throw new o("Only JWTs using Compact JWS serialization can be decoded");if(3!==s)throw new o("Invalid JWT");if(!i)throw new o("JWTs must contain a payload");try{t=function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:n.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=n.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}(i)}catch{throw new o("Failed to base64url decode the payload")}try{r=JSON.parse(n.decode(t))}catch{throw new o("Failed to parse the decoded payload as JSON")}if(!(e=>{var t;if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r})(r))throw new o("Invalid JWT Claims Set");return r}},84918:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseTokenVerifier=void 0,t.createIdTokenVerifier=function(e,t){return new c(o.CLIENT_CERT_URL,"https://securetoken.google.com/",e,t)};let n=r(21293),i=r(46342),o=r(47821),s=r(16223),a=r(56747),l=r(12577),u=r(10586);class c{issuer;projectId;tenantId;signatureVerifier;constructor(e,t,r,n){if(this.issuer=t,this.projectId=r,this.tenantId=n,!(0,u.isURL)(e))throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,"The provided public client certificate URL is an invalid URL.");this.signatureVerifier=a.PublicKeySignatureVerifier.withCertificateUrl(e)}async verifyJWT(e,t){let r=await this.decodeAndVerify(e,this.projectId,t),n=(0,l.mapJwtPayloadToDecodedIdToken)(r.payload);if(this.tenantId&&n.firebase.tenant!==this.tenantId)throw new i.AuthError(i.AuthErrorCode.MISMATCHING_TENANT_ID);return n}async decodeAndVerify(e,t,r){let i=(0,n.decodeProtectedHeader)(e),o=(0,n.decodeJwt)(e);return this.verifyContent({header:i,payload:o},t),await this.verifySignature(e,r),{header:i,payload:o}}verifyContent(e,t){let r,n=e&&e.header,a=e&&e.payload;if((0,o.useEmulator)()||void 0!==n.kid?(0,o.useEmulator)()||n.alg===s.ALGORITHM_RS256?a.iss!==this.issuer+t?r=`idToken has incorrect "iss" (issuer) claim. Expected ${this.issuer}${t}, but got ${a.iss}`:""===a.sub?r='idToken has an empty string "sub" (subject) claim.':"string"==typeof a.sub&&a.sub.length>128&&(r='idToken has "sub" (subject) claim longer than 128 characters.'):r=`Incorrect algorithm. ${s.ALGORITHM_RS256} expected, ${n.alg} provided`:r=a.aud===o.FIREBASE_AUDIENCE?"idToken was expected, but custom token was provided":'idToken has no "kid" claim.',r)throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,r)}verifySignature(e,t){return this.signatureVerifier.verify(e,t).catch(e=>{throw this.mapJoseErrorToAuthError(e)})}mapJoseErrorToAuthError(e){return e instanceof n.errors.JWTExpired?i.AuthError.fromError(e,i.AuthErrorCode.TOKEN_EXPIRED,e.message):e instanceof n.errors.JWSSignatureVerificationFailed?i.AuthError.fromError(e,i.AuthErrorCode.INVALID_SIGNATURE):e instanceof i.AuthError?e:i.AuthError.fromError(e,i.AuthErrorCode.INTERNAL_ERROR,e.message)}}t.FirebaseTokenVerifier=c},87685:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationDefault=void 0;let n=r(53825);t.getApplicationDefault=()=>new n.ComputeEngineCredential},94493:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseTokenGenerator=t.BLACKLISTED_CLAIMS=void 0,t.cryptoSignerFromCredential=u,t.createFirebaseTokenGenerator=function(e,t,r){return new l((0,a.useEmulator)()?new o.EmulatorSigner(t):u(e,t,r))};let n=r(53825),i=r(46342),o=r(96464),s=r(10586),a=r(47821);t.BLACKLISTED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce"];class l{signer;constructor(e){this.signer=e}createCustomToken(e,r){let n;if(e.length>128?n="`uid` argument must a uid with less than or equal to 128 characters.":l.isDeveloperClaimsValid_(r)||(n="`developerClaims` argument must be a valid, non-null object containing the developer claims."),n)throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,n);let o={};if(void 0!==r){for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)){if(-1!==t.BLACKLISTED_CLAIMS.indexOf(e))throw new i.AuthError(i.AuthErrorCode.INVALID_ARGUMENT,`Developer claim "${e}" is reserved and cannot be specified.`);o[e]=r[e]}}return this.signer.getAccountId().then(async t=>{let r=Math.floor(Date.now()/1e3),n={aud:"https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",iat:r,exp:r+3600,iss:t,sub:t,uid:e};return Object.keys(o).length>0&&(n.claims=o),this.signer.sign(n)})}static isDeveloperClaimsValid_(e){return void 0===e||(0,s.isNonNullObject)(e)}}function u(e,t,r){return e instanceof n.ServiceAccountCredential?new o.ServiceAccountSigner(e,t):new o.IAMSigner(e,t,r)}t.FirebaseTokenGenerator=l},96027:(e,t,r)=>{r.d(t,{E:()=>p});var n=r(54338),i=r(36923),o=r(24639),s=r(93544),a=class extends s.Q{constructor(e={}){super(),this.config=e,this.#l=new Map}#l;build(e,t,r){let o=t.queryKey,s=t.queryHash??(0,n.F$)(o,t),a=this.get(s);return a||(a=new i.X({client:e,queryKey:o,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.#l.has(e.queryHash)||(this.#l.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#l.get(e.queryHash);t&&(e.destroy(),t===e&&this.#l.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.jG.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#l.get(e)}getAll(){return[...this.#l.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,n.MK)(e,t)):t}notify(e){o.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){o.jG.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){o.jG.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=r(34286),u=class extends s.Q{constructor(e={}){super(),this.config=e,this.#u=new Set,this.#c=new Map,this.#d=0}#u;#c;#d;build(e,t,r){let n=new l.s({mutationCache:this,mutationId:++this.#d,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#u.add(e);let t=c(e);if("string"==typeof t){let r=this.#c.get(t);r?r.push(e):this.#c.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#u.delete(e)){let t=c(e);if("string"==typeof t){let r=this.#c.get(t);if(r)if(r.length>1){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#c.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=c(e);if("string"!=typeof t)return!0;{let r=this.#c.get(t),n=r?.find(e=>"pending"===e.state.status);return!n||n===e}}runNext(e){let t=c(e);if("string"!=typeof t)return Promise.resolve();{let r=this.#c.get(t)?.find(t=>t!==e&&t.state.isPaused);return r?.continue()??Promise.resolve()}}clear(){o.jG.batch(()=>{this.#u.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#u.clear(),this.#c.clear()})}getAll(){return Array.from(this.#u)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,n.nJ)(e,t))}notify(e){o.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return o.jG.batch(()=>Promise.all(e.map(e=>e.continue().catch(n.lQ))))}};function c(e){return e.options.scope?.id}var d=r(30130),h=r(54961),f=r(70301),p=class{#h;#f;#o;#p;#m;#y;#g;#v;constructor(e={}){this.#h=e.queryCache||new a,this.#f=e.mutationCache||new u,this.#o=e.defaultOptions||{},this.#p=new Map,this.#m=new Map,this.#y=0}mount(){this.#y++,1===this.#y&&(this.#g=d.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#h.onFocus())}),this.#v=h.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#h.onOnline())}))}unmount(){this.#y--,0===this.#y&&(this.#g?.(),this.#g=void 0,this.#v?.(),this.#v=void 0)}isFetching(e){return this.#h.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#f.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#h.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),r=this.#h.build(this,t),i=r.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.d2)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#h.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){let i=this.defaultQueryOptions({queryKey:e}),o=this.#h.get(i.queryHash),s=o?.state.data,a=(0,n.Zw)(t,s);if(void 0!==a)return this.#h.build(this,i).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return o.jG.batch(()=>this.#h.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#h.get(t.queryHash)?.state}removeQueries(e){let t=this.#h;o.jG.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let r=this.#h;return o.jG.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let r={revert:!0,...t};return Promise.all(o.jG.batch(()=>this.#h.findAll(e).map(e=>e.cancel(r)))).then(n.lQ).catch(n.lQ)}invalidateQueries(e,t={}){return o.jG.batch(()=>(this.#h.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let r={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(o.jG.batch(()=>this.#h.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(n.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let r=this.#h.build(this,t);return r.isStaleByTime((0,n.d2)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.lQ).catch(n.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,f.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.lQ).catch(n.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,f.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return h.t.isOnline()?this.#f.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#h}getMutationCache(){return this.#f}getDefaultOptions(){return this.#o}setDefaultOptions(e){this.#o=e}setQueryDefaults(e,t){this.#p.set((0,n.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#p.values()],r={};return t.forEach(t=>{(0,n.Cp)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){this.#m.set((0,n.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#m.values()],r={};return t.forEach(t=>{(0,n.Cp)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#o.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#o.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#h.clear(),this.#f.clear()}}},96464:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IAMSigner=t.ServiceAccountSigner=t.EmulatorSigner=void 0,t.createEmulatorToken=a;let n=r(21293),i=r(12577),o=r(48107),s=r(16223);function a(e){return`${n.base64url.encode(JSON.stringify({alg:"none",typ:"JWT"}))}.${n.base64url.encode(JSON.stringify(e))}.${n.base64url.encode("")}`}class l{tenantId;constructor(e){this.tenantId=e}async sign(e){return this.tenantId&&(e.tenant_id=this.tenantId),a(e)}getAccountId(){return Promise.resolve("firebase-auth-emulator@example.com")}}t.EmulatorSigner=l;class u{credential;tenantId;constructor(e,t){this.credential=e,this.tenantId=t}async sign(e){return this.tenantId&&(e.tenant_id=this.tenantId),(0,o.sign)({payload:e,privateKey:this.credential.privateKey})}getAccountId(){return Promise.resolve(this.credential.clientEmail)}}t.ServiceAccountSigner=u;class c{algorithm=s.ALGORITHM_RS256;credential;tenantId;serviceAccountId;constructor(e,t,r){this.credential=e,this.tenantId=t,this.serviceAccountId=r}async sign(e){this.tenantId&&(e.tenant_id=this.tenantId);let t=await this.getAccountId(),r=await this.credential.getAccessToken();return(0,o.signBlob)({accessToken:r.accessToken,serviceAccountId:t,payload:e})}async getAccountId(){if(this.serviceAccountId)return this.serviceAccountId;let e=await this.credential.getAccessToken(),t={method:"GET",headers:{"Metadata-Flavor":"Google",Authorization:`Bearer ${e.accessToken}`}};return this.serviceAccountId=await (0,i.fetchText)("http://metadata/computeMetadata/v1/instance/service-accounts/default/email",t)}}t.IAMSigner=c}}]);